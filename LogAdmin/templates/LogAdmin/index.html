{% load static %}
<!doctype html>
<html lang="ch">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="日志管理平台">
        <meta name="keywords" content="日志管理平台">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <title>日志管理平台</title>
        <script src="{% static "js/jquery.min.js" %}"></script>
        <script src="{%  static "js/bootstrap.min.js" %}"></script>

        <script>



            <!-- 项目模块全局-->
function revPro(x){//修改传值
                $me=$(x);
                $("#revprores").empty();
                var proid =  $($me.parent().siblings()[0]).html();
                var proname = $($me.parent().siblings()[1]).html();
                $("#proid").val(proid);
                $("#proname").val(proname);

};

function delPro(x) {
                $me=$(x);
                var proid =  $($me.parent().siblings()[0]).html();
                $("#delProsav").val(proid);
};

function refPro() {//刷新项目table
                  $.ajax({
                      type: "POST",
                      url: "/ajax/refOption",
                      data: {"option": "refPro"},
                      datatype: "json",
                        success: function (ret) {
                          var pro = ret.res;
                            $('#protable').empty();
                          for(var i=0;i<pro.length;i++) {
                              $('#protable').append("       <div class=\"row\" >\n" +
                                  "                            <div class=\"col-xs-1 \">\n" + pro[i].PID + "\n"                  +"</div>\n" +
                                  "                            <div  class=\"col-xs-1 hostname\">\n" +pro[i].pname+ "\n"  +"</div>\n" +
                                  "                            <div class=\"col-xs-2 hostip \">\n" +pro[i].createtime+"\n"           +"</div>\n" +
                                  "                            <div class=\"col-xs-2\">\n" +
                                  "                                <button class=\"btn btn-success btn-xs  \" data-toggle=\"modal\" onclick =revPro(this)  data-target=\"#revisePro\"   >修改</button>\n" +
                                  "                                <button class=\"btn btn-danger btn-xs \" data-toggle=\"modal\"  onclick = delPro(this) data-target=\"#deletePro\">删除</button>\n" +
                                  "                            </div>\n" +
                                  "\n" +
                                  "                        </div>");

                          }}
                  });
              };
 <!-- 主机模块全局 -->

            function revHost (x) {//修改主机传值
                             $me = $(x);

                               var  hostid = $($me.parent().siblings()[0]).html();
                               var  hostname = $($me.parent().siblings()[1]).html() ;
                               var  hostip = $($me.parent().siblings()[2]).html() ;
                               var  hostsecret = $($me.parent().siblings()[3]).html() ;

                               $(":input#reviseHostid").val($.trim(hostid))
                               $(":input#reviseHostname").val($.trim(hostname))
                               $(":input#reviseHostip").val($.trim(hostip) )
                               $(":input#reviseHostSecret").val($.trim(hostsecret))

                           };

            function delHost(x) {//删除主机按钮传id
                             $me=$(x);
                             var  hostid = $($me.parent().siblings()[0]).html() ;
                             $("#delHostsave").val(hostid)
            };

<!--  应用模块全局 -->
            function addSelect () {//添加应用Host，project。apptype下拉框
                           $.ajax({
                           type:"POST",
                           url:"/ajax/getSelect",
                           data:{"select":"select"},
                           datatype:"json",
                               success:function(ret){
                               var shost = ret.host;
                               var sproject = ret.project;
                               var sapptype=ret.apptype;
                                   $("#SHost").empty()
                                   $("#SProject").empty()
                                   $("#SApptype").empty()
                                   for(var i=0;i<shost.length;i++){
                                   $("#SHost").append("<option>"+shost[i].hostname+"</option>"+"\n")
                                   }
                                   for(var i=0;i<sproject.length;i++){
                                   $("#SProject").append("<option>"+sproject[i].pname+"</option>"+"\n")
                                   }
                                   for(var i=0;i<sapptype.length;i++){
                                   $("#SApptype").append("<option>"+sapptype[i].tname+"</option>"+"\n")
                                   }
                           }
                           });
              };


            function revApp (x) {//修改应用传值 #revApp button
                             $me = $(x);
                             $("#revappres").empty();
                               var  appid = $($me.parent().siblings()[0]).html();
                               var  appname = $($me.parent().siblings()[1]).html();
                               var  host = $($me.parent().siblings()[2]).html();
                               var  project = $($me.parent().siblings()[3]).html();
                               var apptype = $($me.parent().siblings()[4]).html();
                               var logpath=$($me.parent().siblings()[5]).html();
                               $(":input#reviseAppid").val(appid)
                               $(":input#reviseAppname").val(appname)
                               $(":input#reviseApppath").val(logpath)


{#                               $(":input#reviseHostip").val(hostip)#}
                        $.ajax({
                           type:"POST",
                           url:"/ajax/getSelect",
                           data:{"select":"select"},
                           datatype:"json",
                               success:function(ret){
                               var shost = ret.host;
                               var sproject = ret.project;
                               var sapptype = ret.apptype;
                                   $("#revSHost").empty();
                                   $("#revSProject").empty();
                                   $("#revSApptype").empty();

                                   for(var i=0;i<shost.length;i++){
                                       if(shost[i].hostname==$.trim(host)){
                                           $("#revSHost").append("<option selected=\"selected\">"+shost[i].hostname+"</option>"+"\n")
                                  }
                                       else {$("#revSHost").append("<option>"+shost[i].hostname+"</option>"+"\n")}
                                   };

                                   for(var i=0;i<sproject.length;i++){
                                       if(sproject[i].pname==$.trim(project)){  $("#revSProject").append("<option selected=\"selected\">"+sproject[i].pname+"</option>"+"\n")}
                                       else {  $("#revSProject").append("<option>"+sproject[i].pname+"</option>"+"\n")}
                                   }
                                   for(var i=0;i<sapptype.length;i++){
                                       if(sapptype[i].tname==$.trim(apptype)){$("#revSApptype").append("<option selected=\"selected\">"+sapptype[i].tname+"</option>"+"\n")}
                                       else { $("#revSApptype").append("<option>"+sapptype[i].tname+"</option>"+"\n")}
                                   }
                           }});};

              function delApp(x) {//删除主机按钮传id
                             $me=$(x);
                             var  appid = $($me.parent().siblings()[0]).html() ;
                             $("#delAppsave").val(appid)
            };

  <!-- 日志模块全局 -->
              function showLogul(x) { //app跳Logul
                  $me=$(x);
                  var aname=$($me).text();
                  $.ajax({
                      type:"POST",
                      url:"/ajax/showLogul",
                      data:{"aname":aname},
                      datatype:"json",
                      success:function(ret){
                          var log=ret.res;
                          var aid=ret.aid;
                          $("#logdiv").empty();
                          $("#logtitle").val(aid);
                          for (var i=0;i<log.length;i++){
{#                                 $("#logul").append('<li><a href="/ajax/showLogDetail?aid='+aid+'&&'+'logname='+log[i]+">'  + log[i] + '</a></li>')#}
                                 $("#logdiv").append('<li><a href="/ajax/showLogDetail?aid='+aid+'&&logname='+log[i]+'" target="_blank">'+log[i]+'</a></li>')
                          }

                      }
                  });

              }

              function showAppul(x) {//项目跳app
                  $me=$(x);
                  $("#logdiv").empty();
                  var pname=$($me).text();
                  $.ajax({
                      type:"POST",
                      url:"/ajax/showAppul",
                      data:{"pname":pname},
                      datatype:"json",
                      success:function(ret){
                          var app=ret.res;
                          $('#appdiv').empty();
                          if(app.length==0){ $("#appdiv").append("<p><button type=\"button\" class=\"btn btn-primary btn-lg btn-block\">"+"该项目下无应用"+"</button></p>")}
                          else{
                          for(var i=0;i<app.length;i++) {
                              $("#appdiv").append("<p><button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" onclick=\"showLogul(this) \">"+app[i].aname+"</button></p>")
                          }
                          }}
                  });
              };


              function showlogtab() {   //日志管理跳转
                  $.ajax({
                       type:"POST",
                       url:"/ajax/refOption",
                       data:{"option":"ProTab"},
                       datatype:"json",
                      success:function (ret) {
                           var project=ret.res;
                           $("#prodiv").empty();
                           $("#logdiv").empty();
                           $("#appdiv").empty();
                           for(var i=0;i<project.length;i++){
                               $("#prodiv").append("<p><button type=\"button\" class=\"btn btn-primary btn-lg btn-block\" onclick=\"showAppul(this) \">"+project[i].pname+"</button></p>")
                           }
                      }
                  });
              };

            function reviseUser(x) { //修改用户传值
                $me=$(x);
                $("#revuserres").empty();
                var username = $($me.parent().siblings()[0]).html();
                var permi = $($me.parent().siblings()[1]).html();
                console.log(permi)
                $("#revusername").val(username)
                $("#revpermi").empty();
                if(permi=='管理员'){
                    $("#revpermi").append("<option selected=\" selected\">管理员</option>"+"<option>普通用户</option>")
                }
                else {$("#revpermi").append("<option selected=\" selected\">普通用户</option>"+"<option>管理员</option>")
}}

            function deleteUser(x) {//删除用户按钮传id
                             $me=$(x);
                             var  username = $($me.parent().siblings()[0]).html() ;
                             $("#delUsersave").val(username)
                console.log($("#delUsersave").val())
            };
    <!-------------------------------------------------------------------------分割线------------------------------------------------------------- -->
            $(function() {
                var permission = $("#role").html()
                if (permission!='管理员'){
                    $("#promeun").hide();
                    $("#appmeun").hide();
                    $("#hostmeun").hide();
                    $("#usermeum").hide();

                }
<!-- 用户管理模块 -->
               $("#usermeum").click(function () {// user meun跳转刷新table
                   console.log('usermeun aaaaaaaaaaaaaaaaa')
                         $.ajax({
                             type: "POST",
                             url: "/ajax/refOption",
                             data: {"option": "refUser"},
                             datatype: "json",
                             success:function (ret) {
                                 var user=ret.res;
                                 var permission='普通用户';
                                 $("#usertable").empty();
                                 for(i=0;i<user.length;i++){
                                 $("#usertable").append("<div class=\"row\">" + "<div class=\"col-xs-2\">" + user[i].username + "</div>\n" +
                                     "<div class=\"col-xs-2\">" +user[i].is_superuser+ "</div>"+
                                     "<div class=\"col-xs-2\">" + user[i].last_login + "</div>" +
                                     "                            <div class=\"col-xs-2\">\n" +
                                     "                                <button class=\"btn btn-success btn-xs\" data-toggle=\"modal\" data-target=\"#reviseUser\" onclick=\"reviseUser(this)\">修改</button>\n" +
                                     "                                <button class=\"btn btn-danger btn-xs\" data-toggle=\"modal\" data-target=\"#deleteUser\" onclick=\"deleteUser(this)\" >删除</button>\n" +
                                     "                            </div>\n" +
                                     "                        </div>")
                                 }}});
               });
                $("#adduser").click(function () { //添加user
                    var username =$("#username").val();
                    var password =$("#password").val();
                    var permi=$("#Spermission option:selected").val();
                    console.log(username,password,permi)
                    $.ajax({
                        type: "POST",
                        url: "/ajax/addUser",
                        data: {"username":username,"password":password,"permi":permi},
                        datatype: "json",
                        success:function (ret) {
                                var result=ret.res;
                                console.log(result)
                        }});
                });

                $("#revusersav").click(function () { //修改用户save
                    console.log('aaaaaaaaaaa')
                    var username=$("#revusername").val();
                    var passwd=$("#revpasswd").val();
                    var permi=$("#revpermi option:selected").text();
                    $.ajax({
                        type: "POST",
                        url: "/ajax/revUser",
                        data: {"username":username,"password":passwd,"permi":permi},
                        datatype: "json",
                        success:function (ret) {
                           $("#revuserres").append("<span>"+ret.res+"</span>")
                        }
                    });
                });

                $("#delUsersave").click(function () { //删除用户确认
                    var username=$("#delUsersave").val();
                    $.ajax({
                        type: "POST",
                        url: "/ajax/delUser",
                        data: {"username":username},
                        success:function (ret) {
                            console.log(ret.res)
                        }
                    });});

                $("#refUser").click(function () {//刷新用户表
                    $.ajax({
                        type: "POST",
                        url: "/ajax/refOption",
                        data: {"option": "refUser"},
                        datatype: "json",
                        success:function (ret) {
                            var user=ret.res;
                            var permission='普通用户';
                            $("#usertable").empty();
                            for(i=0;i<user.length;i++){
                                $("#usertable").append("<div class=\"row\">" + "<div class=\"col-xs-2\">" + user[i].username + "</div>\n" +
                                    "<div class=\"col-xs-2\">" +user[i].is_superuser+ "</div>"+
                                    "<div class=\"col-xs-2\">" + user[i].last_login + "</div>" +
                                    "                            <div class=\"col-xs-2\">\n" +
                                    "                                <button class=\"btn btn-success btn-xs\" data-toggle=\"modal\" data-target=\"#reviseUser\" onclick=\"reviseUser(this)\">修改</button>\n" +
                                    "                                <button class=\"btn btn-danger btn-xs\" data-toggle=\"modal\" data-target=\"#deleteUser\" onclick=\"deleteUser(this)\" >删除</button>\n" +
                                    "                            </div>\n" +
                                    "                        </div>")
                                 }}});
                })

                $("#revpasswdsav").click(function () { //修改用户密码
                    console.log('aaaaaaaaaaaaaa')
                    var oldpasswd=$("#oldpasswd").val();
                    var newpasswd=$("#newpasswd").val();
                    var repasswd=$("#repasswd").val();
                    var username=$("#userName").html();
                    console.log(newpasswd!=repasswd)
                    if(newpasswd!=repasswd){
                        $("#revpasswdres").empty()
                        $("#revpasswdres").append("<span>两次密码不一致</span>")}
                    else {
                    $.ajax({
                        type: "POST",
                        url: "/ajax/revPasswd",
                        data: {"username":username,"oldpasswd":oldpasswd,"newpasswd":repasswd },
                        datatype: "json",
                      success:function (ret) {
                            var res=ret.res;
                            console.log("res:"+res)
                            $("#revpasswdres").empty()
                            $("#revpasswdres").append("<span>"+ret.res+"</span>")

                      }


                    });}

                })


   <!-- 项目管理模块 -->
            $(":button#revProsav").click(function () {//修改项目
                var proid=$("#proid").val();
                var proname=$("#proname").val();
                $.ajax({
                       type:"POST",
                       url: "/ajax/revPro",
                       data: {"proid":proid,"proname":proname},// 要提交的数据
                       datatype:"json",
                    success:function (ret) {
                                $('#revprores').empty();
                                $('#revprores').append("<span>"+ret.res+"</span>")
                    }

                });
            });



            $(":button#addPro").click(function(){//添加项目
                var proname=$("#addProName").val();
                $('#addprores').empty();
                if (proname==''){  $('#addprores').append("<span>"+"项目名不能为空"+"</span>");}
                else {
                $.ajax({
                    type:"POST",
                    url: "/ajax/addPro",
                    data: {"proname":proname},// 要提交的数据
                    datatype:"json",
                    success:function (ret) {
                        $('#addprores').empty();
                        $('#addprores').append("<span>"+ret.res+"</span>");

                    }

                });}

            });

            $(":button#delProsav").click(function () {
                var proid=$("#delProsav").val();
                $.ajax({
                    type:"POST",
                    url: "/ajax/delPro",
                    data: {"proid":proid},// 要提交的数据
                    datatype:"json",
                    success:function (ret) {

                    }
                });

            });




<!-- 主机管理模块  -->
                $("#addhost").click(function(){         //添加主机方法
                        var hostname =$("#hostname").val();
                        var hostip = $("#hostip").val();
                        var hostsecret = $("#hostsecret").val();
                        $.ajax({
                            type:"POST",
                            url: "/ajax/addHost",
                            data: {"hostname":hostname,"hostip":hostip,"hostsecret":hostsecret},// 要提交的数据
                            datatype:"json",
                            success:function(ret) {
                                $('#addhostres').empty();
                                $('#addhostres').append("<span>"+ret.res+"</span>")
                                     }
                              });
                     });

                 $("#revhostsave").click( function () { //修改主机保存按钮
                     var hostid = $(":input#reviseHostid").val()
                     var hostname = $(":input#reviseHostname").val()
                     var hostip = $(":input#reviseHostip").val()
                     var hostsecret = $(":input#reviseHostSecret").val()
                        $.ajax({
                            type:"POST",
                            url: "/ajax/revHost",
                            data: {"hostid":hostid,"hostname":hostname,"hostip":hostip,"hostsecret":hostsecret},// 要提交的数据
                            datatype:"json",
                            success:function(ret) {
                                $('#revhostres').empty();
                                $('#revhostres').append("<span>"+ret.res+"</span>")
                                     }
                              });
                });
                 $("#delHostsave").click( function () { //删除主机保存
                       var hostid=$(this).val()
                     $.ajax({
                            type:"POST",
                            url: "/ajax/delHost",
                            data: {"hostid":hostid},// 要提交的数据
                            datatype:"json",
                     });

                 });


              $(":button#ref").click(function () {//刷新table
                  $.ajax({
                      type: "POST",
                      url: "/ajax/refOption",
                      data: {"option": "refHost"},
                      datatype: "json",
                      success: function (ret) {
                          var host = ret.res;
                          $('#hostrow').empty();
                          for(var i=0;i<host.length;i++) {
                              $('#hostrow').append("       <div class=\"row\" >\n" +
                                  "                            <div class=\"col-xs-1 \">\n" + host[i].HID + "\n"                  +"</div>\n" +
                                  "                            <div  class=\"col-xs-1 hostname\">\n" +host[i].hostname+ "\n"  +"</div>\n" +
                                  "                            <div class=\"col-xs-2 hostip \">\n" +host[i].ip+"\n"           +"</div>\n" +
                                  "                            <div class=\"col-xs-2 hostip \">\n" +host[i].secret+"\n"           +"</div>\n" +
                                  "                            <div class=\"col-xs-2\">\n" +
                                  "                                <button class=\"btn btn-success btn-xs reviseHost \" data-toggle=\"modal\" onclick =revHost(this)  data-target=\"#reviseHost\"   >修改</button>\n" +
                                  "                                <button class=\"btn btn-danger btn-xs deleteHost\" data-toggle=\"modal\"  onclick = delHost(this) data-target=\"#deleteHost\">删除</button>\n" +
                                  "                            </div>\n" +
                                  "\n" +
                                  "                        </div>");
                          } }
                  });
              });

              <!-- 应用管理 -->


                   $("#addappsav").click(function () {//应用添加保存
                       var appname = $(":input#appname").val();
                       var logpath = $(":input#logpath").val();
                       var host = $("#SHost option:selected").text();
                       var project = $("#SProject option:selected").text();
                       var typename = $("#SApptype option:selected").val();
                       var lnxPath = /^([\/][\w-]+)*\/$/.test(logpath);
                       if (lnxPath==false) {
                           $("#appres").empty()
                           $("#appres").append("<span>" + "路径格式错误!"+"</span>");
                       }
                       else{
                       $.ajax({
                           type: "POST",
                           url: "/ajax/addApp",
                           data: {"appname": appname, "logpath": logpath, "host": host, "project": project,'apptype':typename},
                           datatype: "json",
                           success: function (ret) {
                               $("#appres").empty();
                               $("#appres").append("<span>" + ret.res + "</span>")

                           }

                       });
                   } });

                 $("#revapptsave").click( function () { //修改应用保存按钮
                     var appid = $.trim($(":input#reviseAppid").val());
                     var appname = $(":input#reviseAppname").val();
                     var host =$("#revSHost option:selected").text();
                     var project =$("#revSProject option:selected").text();
                     var typename = $("#revSApptype option:selected").text();
                     var logpath=$(":input#reviseApppath").val();
                     var lnxPath = /^([\/][\w-]+)*\/$/.test(logpath);
                    if(lnxPath==false){
                        $('#revappres').empty();
                        $('#revappres').append("<span>"+"日志路径格式错误！"+"</span>")}
                    else{
                        $.ajax({
                            type:"POST",
                            url: "/ajax/revApp",
                            data: {"appid":appid,"appname":appname,"hostname":host,"project":project,"logpath":logpath,"typename":typename},// 要提交的数据
                            datatype:"json",
                            success:function(ret) {
                                $('#revappres').empty();
                                $('#revappres').append("<span>"+ret.res+"</span>")
                                     }
                              });}
                });
                $("#delAppsave").click( function () { //删除应用保存
                       var appid=$(this).val()
                     $.ajax({
                            type:"POST",
                            url: "/ajax/delApp",
                            data: {"appid":appid},// 要提交的数据
                            datatype:"json",
                     });

                 });


                $(":button#refapp").click(function () {//刷新应用table
                  $.ajax({
                      type: "POST",
                      url: "/ajax/refOption",
                      data: {"option": "refApp"},
                      datatype: "json",
                        success: function (ret) {
                          var app = ret.res;
                            $('#apptable').empty();
                          for(var i=0;i<app.length;i++) {
                              $('#apptable').append("<div class=\"row\"  >\n" +
                                  "                            <div class=\"col-xs-1 \">\n" + app[i].AID + "</div>\n" +
                                  "                            <div class=\"col-xs-1 \">\n" +app[i].aname + "</div>\n" +
                                  "                            <div class=\"col-xs-1 \">\n" +app[i].hostname + "</div>\n" +
                                  "                            <div class=\"col-xs-1\">\n" + app[i].pname + "</div>\n" +
                                  "                            <div class=\"col-xs-1\">\n" + app[i].tname+ "</div>\n" +
                                  "                            <div class=\"col-xs-2\">\n" + app[i].logpath+ "</div>\n" +
                                  "                            <div class=\"col-xs-2\">\n" +
                                  "                                <button class=\"btn btn-success btn-xs reviseApp \" data-toggle=\"modal\" onclick=\"revApp(this)\" data-target=\"#reviseApp\"   >修改</button>" +
                                  "                                <button class=\"btn btn-danger btn-xs deleteApp\" data-toggle=\"modal\" onclick=\"delApp(this)\" data-target=\"#deleteApp\">删除</button>" +
                                  "                            </div>");
                          } }
                  });
              });



              <!-- 布局动画   -->

                $(".meun-item").click(function() {
                    $(".meun-item").removeClass("meun-item-active");
                    $(this).addClass("meun-item-active");
                    var itmeObj = $(".meun-item").find("img");
                    itmeObj.each(function() {
                        var items = $(this).attr("src");
                        items = items.replace("_grey.png", ".png");
                        items = items.replace(".png", "_grey.png")
                        $(this).attr("src", items);
                    });
                    var attrObj = $(this).find("img").attr("src");
                    ;
                    attrObj = attrObj.replace("_grey.png", ".png");
                    $(this).find("img").attr("src", attrObj);
                });
                $("#topAD").click(function() {
                    $("#topA").toggleClass(" glyphicon-triangle-right");
                    $("#topA").toggleClass(" glyphicon-triangle-bottom");
                });
                $("#topBD").click(function() {
                    $("#topB").toggleClass(" glyphicon-triangle-right");
                    $("#topB").toggleClass(" glyphicon-triangle-bottom");
                });
                $("#topCD").click(function() {
                    $("#topC").toggleClass(" glyphicon-triangle-right");
                    $("#topC").toggleClass(" glyphicon-triangle-bottom");
                });
                $(".toggle-btn").click(function() {
                    $("#leftMeun").toggleClass("show");
                    $("#rightContent").toggleClass("pd0px");
                })
            })
        </script>
        <!--[if lt IE 9]>
  <script src="{% static "js/html5shiv.min.js" %}"></script>
  <script src="{% static "js/respond.min.js" %}"></script>
<![endif]-->
        <link href="{% static "css/bootstrap.min.css" %}" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="{% static "css/common.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "css/slide.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "css/bootstrap.min.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "css/flat-ui.min.css" %}" />
        <link rel="stylesheet" type="text/css" href="{% static "css/jquery.nouislider.css" %}">
         <style>
   #wrap{
       background: cornsilk;
   }
        </style>
    </head>

    <body>
        <div id="wrap">
            <!-- 左侧菜单栏目块 -->
            <div class="leftMeun" id="leftMeun">
                <div id="logoDiv">
                    <p id="logoP"><img id="logo" alt="日志管理平台" src="{% static "images/logo.png" %}"><span>日志管理平台</span></p>
                </div>
                <div id="personInfor">
                    <p id="userName">{{ username }}</p>
                    <p id="role">{{ permission }}</p>
                    <p>
                        <a href="/logout">退出登录</a>
                    </p>
                </div>
                <div class="meun-title">账号管理</div>
{#                <div class="meun-item meun-item-active" href="#sour" aria-controls="sour" role="tab" data-toggle="tab"><img src="{% static "images/icon_source.png" %}">资源管理</div>#}
{#                <div class="meun-item" href="#char" aria-controls="char" role="tab" data-toggle="tab"><img src="{% static "images/icon_chara_grey.png" %}">权限管理</div>#}
                <div id="usermeum" class="meun-item" href="#user" aria-controls="user" role="tab" data-toggle="tab"><img src="{% static "images/icon_user_grey.png" %}">用户管理</div>
                <div class="meun-item" href="#chan" aria-controls="chan" role="tab" data-toggle="tab"><img src="{% static "images/icon_change_grey.png" %}">修改密码</div>
                <div class="meun-title">管理台</div>
                <div id="promeun"  class="meun-item" href="#pro" aria-controls="pro" role="tab" data-toggle="tab" onclick="refPro()"><img src="{% static "images/icon_house_grey.png" %}">项目管理</div>
                <div id="hostmeun" class="meun-item" href="#host" aria-controls="host" role="tab" data-toggle="tab"><img src="{% static "images/icon_rule_grey.png" %}">主机管理</div>
                <div id="appmeun" class="meun-item" href="#app" aria-controls="app" role="tab" data-toggle="tab"><img src="{% static "images/icon_card_grey.png" %}">应用管理</div>
                <div class="meun-item" href="#log" aria-controls="log" role="tab" data-toggle="tab" onclick="showlogtab()"><img src="{% static "images/icon_char_grey.png" %}">日志管理</div>
            </div>
            <!-- 右侧具体内容栏目 -->
            <div id="rightContent">
                <a class="toggle-btn" id="nimei">
                    <i class="glyphicon glyphicon-align-justify"></i>
                </a>
                <!-- Tab panes -->
                <div class="tab-content">
            <!--用户管理模块-->
            <div role="tabpanel" class="tab-pane" id="user">
                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addUser">添加用户 </button>
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" id="refUser">刷新 </button>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-2 ">
                            用户名
                        </div>
                        <div class="col-xs-2">
                            权限
                        </div>
                        <div class="col-xs-2">
                            上次登录时间
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" id="usertable">

                        <div class="row">
                            <div class="col-xs-2">

                            </div>
                            <div class="col-xs-2">

                             </div>
                            <div class="col-xs-2">

                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#reviseUser">修改</button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deleteUser">删除</button>
                            </div>
                        </div>

                    </div>

                </div>

                <!--弹出添加用户窗口-->
                <div class="modal fade" id="addUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">添加用户</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">用户名：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" id="username" placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sLink" class="col-xs-3 control-label">权限：</label>
                                            <div class="col-xs-8 ">
                                                <select class="form-control input-sm duiqi select " id="Spermission">
                                                      <option>普通用户</option>
                                                      <option>管理员</option>
		                                          </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sName" class="col-xs-3 control-label">用户密码：</label>
                                            <div class="col-xs-8 ">
                                                <input type="password" class="form-control input-sm duiqi" id="password" placeholder="">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" data-dismiss="modal" id="adduser">确认</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出修改用户窗口-->
                <div class="modal fade" id="reviseUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改用户</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">用户名：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="revusername" placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="sKnot" class="col-xs-3 control-label">权限：</label>
                                            <div class="col-xs-8">
                                                <select type="" class="form-control input-sm duiqi" id="revpermi" placeholder="">

                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">密码：</label>
                                            <div class="col-xs-8 ">
                                                <input type="password" class="form-control input-sm duiqi" id="revpasswd" placeholder="">
                                            </div>
                                            <div class="col-xs-8" id="revuserres">
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="revusersav">确认</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出删除用户警告窗口-->
                <div class="modal fade" id="deleteUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该用户？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn  btn-xs btn-danger" data-dismiss="modal" id="delUsersave">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

            </div>
            <!-- 修改密码模块 -->
            <div role="tabpanel" class="tab-pane" id="chan">
      <form class="form-horizontal">
                <div style="padding: 50px 0;margin-top: 50px;background-color: #fff; text-align: right;width: 420px;margin: 50px auto;">
                        <div class="form-group">
                            <label for="oldpasswd" class="col-xs-4 control-label">原密码：</label>
                            <div class="col-xs-5">
                                <input type="password" class="form-control input-sm duiqi" id="oldpasswd" placeholder="" style="margin-top: 7px;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="newpasswd" class="col-xs-4 control-label">新密码：</label>
                            <div class="col-xs-5">
                                <input type="password" class="form-control input-sm duiqi" id="newpasswd" placeholder="" style="margin-top: 7px;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="repasswd" class="col-xs-4 control-label">重复密码：</label>
                            <div class="col-xs-5">
                                <input type="password" class="form-control input-sm duiqi" id="repasswd" placeholder="" style="margin-top: 7px;">
                            <div  class="col-xs-7" id="revpasswdres"></div>

                            </div>
                        </div>

                        <div class="form-group text-right">
                            <div class="col-xs-offset-4 col-xs-5" style="margin-left: 169px;">
                                <button type="reset" class="btn btn-xs btn-white">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="revpasswdsav">保存</button>
                            </div>
                        </div>
                </div>
      </form>
            </div>
            <!--项目管理模块-->
            <div role="tabpanel" class="tab-pane" id="pro">

                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addProject" >添加项目 </button>
                        <button class="btn btn-yellow btn-xs" data-toggle="modal"  onclick="refPro()">刷新 </button>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader" >
                        <div class="col-xs-1 ">
                            编码
                        </div>
                        <div class="col-xs-1 ">
                            项目名
                        </div>
                        <div class="col-xs-2">
                            创建时间
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" id="protable">
                        {% for i in project %}
                        <div class="row" >
                            <div class="col-xs-1 ">
                                {{ i.PID }}
                            </div>
                            <div class="col-xs-1">
                                {{ i.pname }}
                            </div>
                            <div class="col-xs-2">
                            {{ i.createtime }}
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs" data-toggle="modal" data-target="#revisePro" onclick="revPro(this)">修改</button>
                                <button class="btn btn-danger btn-xs" data-toggle="modal" data-target="#deletePro" onclick="delPro(this)">删除</button>
                            </div>

                        </div>
                                {% endfor %}
                    </div>

                </div>
                <!--弹出添加项目窗口-->
                <div class="modal fade" id="addProject" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">添加项目</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">项目名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" id="addProName" placeholder="">
                                                <div id="addprores"></div>

                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="addPro">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出修改项目窗口-->
                <div class="modal fade" id="revisePro" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改项目</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                          <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">项目编号：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" disabled="disabled" id="proid" placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">项目名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" id="proname" placeholder="">
                                                  <div id="revprores"></div>
                                            </div>
                                        </div>


                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="revProsav">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出删除项目警告窗口-->
                <div class="modal fade" id="deletePro" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该项目？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-danger" id="delProsav" data-dismiss="modal">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

            </div>
            <!--主机管理模块-->
                    <div role="tabpanel" class="tab-pane" id="host">

                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addHost">添加主机 </button>
                        <button class="btn btn-yellow btn-xs" data-toggle="modal"  id="ref">刷新 </button>
                    </div>
{#                    <div class="col-lg-3 col-lg-offset-1 col-xs-3" style="padding-right: 40px;text-align: right;float: right;">#}
{#                        <label for="paixu">排序:&nbsp;</label>#}
{#                        <select class="form-control">#}
{#                            <option>地区</option>#}
{#                            <option>排名</option>#}
{#                        </select>#}
{#                    </div>#}
                </div>
                <div class="data-div">
                    <div class="row tableHeader">
                        <div class="col-xs-1 ">
                            编码
                        </div>
                        <div class="col-xs-1 ">
                            主机名
                        </div>
                        <div class="col-xs-2">
                            主机ip
                        </div>
                          <div class="col-xs-2">
                            秘钥路径
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" id="hostrow">
                        {% for i in host %}
                        <div class="row" >
                            <div class="col-xs-1 ">
                                {{ i.HID }}
                            </div>
                            <div  class="col-xs-1 hostname">
                                {{ i.hostname }}
                            </div>
                            <div class="col-xs-2 hostip ">
                            {{ i.ip }}
                            </div>
                             <div class="col-xs-2 hostsecret ">
                            {{ i.secret }}
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs reviseHost " data-toggle="modal" onclick="revHost(this)" data-target="#reviseHost"   >修改</button>
                                <button class="btn btn-danger btn-xs deleteHost" data-toggle="modal" onclick="delHost(this)" data-target="#deleteHost">删除</button>
                            </div>

                        </div>
                                      {% endfor %}
                    </div>

                </div>


                <!--弹出添加主机窗口-->
                <div class="modal fade" id="addHost" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">添加主机</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal"  method="post">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">主机名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="hostname" placeholder="">
                                            </div>
                                        </div>
                                         <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">主机ip：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="hostip" placeholder="">
                                            </div>
                                        </div>
                                         <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">秘钥路径：</label>
                                            <div class="col-xs-8 ">
                                                <input type="password" class="form-control input-sm duiqi" id="hostsecret" placeholder="">
                                                <div id="addhostres">
                                                </div>

                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="addhost" >保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出修改主机窗口-->
                <div class="modal fade" id="reviseHost" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改主机</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">主机编号：</label>
                                            <div class="col-xs-8 ">
                                                <input  disabled="disabled" class="form-control input-sm duiqi" id="reviseHostid"  placeholder="">
                                                </input>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">主机名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="reviseHostname"  placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">主机ip：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="reviseHostip"  placeholder="">
                                                <div id="revhostres">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">秘钥路径：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="reviseHostSecret"  placeholder="">
                                                <div id="revhostres">
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="revhostsave">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

                <!--弹出删除主机警告窗口-->
                <div class="modal fade" id="deleteHost" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid" id="delHost">
                                    确定要删除该主机？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-danger" data-dismiss="modal"  id="delHostsave">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->

            </div>

                    <!--日志管理模块-->
            <div role="tabpanel" class="tab-pane active" id="log">
                <div class="data-div">
                    <div class="row rodiv">
                        <div class="col-xs-2">
                            <h6 class="text-center">项目</h6>
                            <div id="prodiv">
                                {% for i in project %}
                                 <p><button type="button" class="btn btn-primary btn-lg btn-block" onclick="showAppul(this) ">{{ i.pname }}</button></p>
                                {% endfor %}
                                </div>
                        </div>
                        <div class="col-xs-2">
                            <h6 class="text-center">应用</h6>
                            <div id="appdiv">
                                </div>
                        </div>
                        <div class="col-xs-2">
                            <h6 class="text-center">日志</h6>
                            <div id="logdiv">
                                </div>
                        </div>

                    </div>

                </div>





                <!-- /.modal -->

                <!--弹出删除用户警告窗口-->
                <div class="modal fade" id="deleteUser" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    确定要删除该用户？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-green btn-xs">保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                <!-- /.modal -->
            </div>
            <!--应用管理模块-->
            <div role="tabpanel" class="tab-pane" id="app">

                <div class="check-div form-inline">
                    <div class="col-xs-3">
                        <button class="btn btn-yellow btn-xs" data-toggle="modal" data-target="#addApp" onclick="addSelect()">添加应用 </button>
                        <button class="btn btn-yellow btn-xs" data-toggle="modal"  id="refapp">刷新 </button>
                    </div>
                </div>
                <div class="data-div">
                    <div class="row tableHeader" >
                        <div class="col-xs-1 ">
                            编码
                        </div>
                        <div class="col-xs-3 ">
                            应用名
                        </div>
                        <div class="col-xs-1">
                            所属主机
                        </div>
                        <div class="col-xs-1">
                            所属项目
                        </div>
                         <div class="col-xs-1">
                            应用类型
                        </div>
                        <div class="col-xs-3">
                            日志路径
                        </div>
                        <div class="col-xs-2">
                            操作
                        </div>
                    </div>
                    <div class="tablebody" id="apptable">
                        {% for i in app %}
                        <div class="row"  >
                            <div class="col-xs-1 ">
                                {{ i.AID }}
                            </div>
                            <div  class="col-xs-3 ">
                                {{ i.aname }}
                            </div>
                            <div class="col-xs-1 ">
                            {{ i.host.hostname }}
                            </div>
                            <div class="col-xs-1">
                                {{ i.project.pname }}
                            </div>
                            <div class="col-xs-1">
                            {{ i.apptype.tname }}
                            </div>
                            <div class="col-xs-3">
                            {{ i.logpath }}
                            </div>
                            <div class="col-xs-2">
                                <button class="btn btn-success btn-xs reviseApp " data-toggle="modal" onclick="revApp(this)" data-target="#reviseApp"   >修改</button>
                                <button class="btn btn-danger btn-xs deleteApp" data-toggle="modal" onclick="delApp(this)" data-target="#deleteApp">删除</button>
                            </div>

                        </div>
                                      {% endfor %}
                    </div>

                </div>



                <!--弹出添加应用窗口-->
                <div class="modal fade" id="addApp" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">添加应用</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal"  method="post" id="">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">应用名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="appname" placeholder="">
                                            </div>
                                        </div>
                                         <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">所属主机：</label>
                                            <div class="col-xs-8 ">
                                              <select class="form-control input-sm duiqi select " id="SHost">
                                                      <option>请点击选择</option>
		                                          </select>
                                            </div>
                                        </div>
                                         <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">所属项目：</label>
                                            <div class="col-xs-8 ">
                                                <select class="form-control input-sm duiqi select" id="SProject">
                                                    <option>请点击选择</option>
		                                          </select>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">应用类别：</label>
                                            <div class="col-xs-8 ">
                                                <select class="form-control input-sm duiqi select" id="SApptype">
                                                    <option>请点击选择</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">日志路径：</label>
                                            <div class="col-xs-8 ">
                                                <input type="text" class="form-control input-sm duiqi" id="logpath" placeholder="">
                                                <div id="appres"> </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="addappsav" >保 存</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
                          <!--弹出修改应用窗口-->
                <div class="modal fade" id="reviseApp" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">修改应用</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <form class="form-horizontal">
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">应用编号：</label>
                                            <div class="col-xs-8 ">
                                                <input  disabled="disabled" class="form-control input-sm duiqi" id="reviseAppid"  placeholder="">
                                                </input>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">应用名称：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" id="reviseAppname"  placeholder="">
                                            </div>
                                        </div>
                                         <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">所属主机：</label>
                                            <div class="col-xs-8 ">
                                                  <select class="form-control input-sm duiqi select " id="revSHost">
		                                          </select>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">所属项目：</label>
                                            <div class="col-xs-8 ">
                                                <select class="form-control input-sm duiqi select " id="revSProject">
		                                          </select>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">应用种类：</label>
                                            <div class="col-xs-8 ">
                                                <select class="form-control input-sm duiqi select " id="revSApptype">

                                                </select>
                                            </div>
                                        </div>

                                           <div class="form-group ">
                                            <label for="sName" class="col-xs-3 control-label">日志路径：</label>
                                            <div class="col-xs-8 ">
                                                <input type="email" class="form-control input-sm duiqi" id="reviseApppath"  placeholder="">
                                                <div id="revappres">
                                               </div>
                                            </div>

                                        </div>

                                    </form>
                                </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-green" id="revapptsave">保 存</button>
                            </div>
                             </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>
            <!--  删除确认 ------>
                            <div class="modal fade" id="deleteApp" role="dialog" aria-labelledby="gridSystemModalLabel">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title" id="gridSystemModalLabel">提示</h4>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid" id="delHost">
                                    确定要删除该应用？删除后不可恢复！
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-xs btn-white" data-dismiss="modal">取 消</button>
                                <button type="button" class="btn btn-xs btn-danger" data-dismiss="modal"  id="delAppsave">确 认</button>
                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                    <!-- /.modal-dialog -->
                </div>

            </div>




        </div>
    </div>
</div>
<!-- 滑块js -->
<!--	<script type="text/javascript">
        scale = function(btn, bar, title, unit) {
                this.btn = document.getElementById(btn);
                this.bar = document.getElementById(bar);
                this.title = document.getElementById(title);
                this.step = this.bar.getElementsByTagName("div")[0];
                this.unit = unit;
                this.init();
        };
        scale.prototype = {
                init: function() {
                        var f = this,
                                g = document,
                                b = window,
                                m = Math;
                        f.btn.onmousedown = function(e) {
                                var x = (e || b.event).clientX;
                                var l = this.offsetLeft;
//						var max = f.bar.offsetWidth - this.offsetWidth;
                                var max = f.bar.offsetWidth-20 ;
                                g.onmousemove = function(e) {
                                        var thisX = (e || b.event).clientX;
                                        var to = m.min(max, m.max(-2, l + (thisX - x)));
                                        f.btn.style.left = to+ 'px';
                                        f.ondrag(m.round(m.max(0, to / max) * 100), to);
                                        b.getSelection ? b.getSelection().removeAllRanges() : g.selection.empty();
                                };
                                g.onmouseup = new Function('this.onmousemove=null');
                        };
                },
                ondrag: function(pos, x) {
                        this.step.style.width = Math.max(0, x) +2+ 'px';
                        this.title.innerHTML = pos / 10 + this.unit + "";
                }
        }
        new scale('btn0', 'bar0', 'title0', "分钟");
        new scale('btn1', 'bar1', 'title1', "分钟");
        new scale('btn2', 'bar2', 'title2', "天");
        new scale('btn3', 'bar3', 'title3', "次");
</script>
-->
<script src="{% static "js/jquery.nouislider.js" %}"></script>

<!-- this page specific inline scripts -->
</body>

</html>
